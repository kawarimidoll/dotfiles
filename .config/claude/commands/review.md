---
aliases: [review, code-review, cr]
description: "コードレビューを実行し、改善提案を提供する"
agent: reviewer
---

# /review - コードレビューコマンド

`reviewer`エージェントを使用して、PRまたはローカル変更のコードレビューを実行します。
品質、セキュリティ、パフォーマンスの観点から分析し、建設的な改善提案を提供します。

## 使用方法

```
/review [対象]
```

### 対象の指定
- 引数なし: 現在のローカル変更（staged + unstaged）をレビュー
- `<pr-number>`: 指定したPR番号をレビュー
- `staged`: ステージング済みの変更のみをレビュー
- `<commit-hash>`: 特定のコミットをレビュー
- `<branch-name>`: 指定ブランチとベースブランチの差分をレビュー

## 実行内容

1. **変更内容の取得**
   - 対象に応じて適切なgit/ghコマンドで変更を取得
   - ファイル一覧と変更統計を収集

2. **多角的レビュー**
   - コード品質（可読性、保守性、設計）
   - セキュリティ（脆弱性、認証、入力検証）
   - パフォーマンス（効率性、最適化）
   - テスト（カバレッジ、品質）
   - ドキュメント（更新、明確性）

3. **レポート生成**
   - 総合スコアと評価内訳
   - 良い実装の評価
   - 優先度付き改善提案
   - 具体的なコード例

## 出力例

```markdown
# コードレビューレポート

## 📊 変更概要
- 対象: PR #123
- 変更ファイル数: 5
- 追加行数: +120
- 削除行数: -45

## 🎯 総合評価: 7/10

✅ 良い点:
- 適切なエラーハンドリング実装
- テストカバレッジの向上

⚠️ 改善提案:
🔴 必須:
- `auth.ts:45` - SQLインジェクション脆弱性

🟡 推奨:
- `api.ts:78` - N+1問題の可能性

[詳細なレビュー内容...]
```

## レビュー観点

### デフォルトチェック項目
- **コード品質**: 命名、構造、重複、複雑度
- **セキュリティ**: 脆弱性、認証、入力検証
- **パフォーマンス**: アルゴリズム、クエリ、キャッシュ
- **テスト**: カバレッジ、品質、独立性
- **ドキュメント**: README、API文書、コメント

### カスタマイズ
プロジェクト固有のレビュー観点は`.claude/review-config.md`で設定可能

## オプション（将来実装予定）

```
/review --focus security      # セキュリティに重点
/review --quick               # 簡易レビュー
/review --detailed            # 詳細レビュー
/review --compare main        # 特定ブランチと比較
```

## 活用シーン

- **PR作成前**: ローカル変更の事前チェック
- **PR確認時**: 他者のPRレビュー支援
- **リファクタリング**: コード改善機会の発見
- **セキュリティ監査**: 脆弱性の検出
- **学習**: ベストプラクティスの理解

## 注意事項

- レビューは機械的な分析に基づく提案です
- プロジェクト固有の文脈は人間のレビュアーが判断すべきです
- 自動レビューは人間のレビューを補完するものです

## 関連コマンド

- `/fix` - コード品質の自動修正（quality-fixerエージェント）
- `/commit` - レビュー後のコミット（commit-makerエージェント）
- `/pr` - レビュー後のPR作成（pr-makerエージェント）